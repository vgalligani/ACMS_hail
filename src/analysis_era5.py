from netCDF4 import Datasetimport matplotlib.pyplot as pltimport numpy as np from matplotlib.cm import get_cmapimport matplotlib.colors as mcolorsimport colormaps_new as cmaps# provinciasprov = np.genfromtxt("/home/vito.galligani/Work/Tools/Maps/provincias.txt", delimiter='')# topografia fn = '/home/vito.galligani/Work/Tools/etopo1_bedrock.nc'ds = Dataset(fn)topo_lat = ds.variables['lat'][:]topo_lon = ds.variables['lon'][:]topo_dat = ds.variables['Band1'][:]/1e3lons_topo, lats_topo = np.meshgrid(topo_lon,topo_lat)    newERA5='/home/vito.galligani/datosmunin3/e5/'oldERA5='/home/vito.galligani/datosmunin3/Get_ERA5/20181011_netcdf/'# dict_keys(['number', 'valid_time', 'latitude', 'longitude', # 'expver', 'u10', 'v10', 'd2m', 't2m', 'lsm', 'msl', 'siconc', # 'sst', 'skt', 'sd', 'stl1', 'stl2', 'stl3', 'stl4', 'sp', 'swvl1', # 'swvl2', 'swvl3', 'swvl4'])ds = Dataset(oldERA5+'ERA5-20181110-20181111-sl.nc')lat = ds.variables['latitude'][:]lon = ds.variables['longitude'][:]sst = ds.variables['sst'][:]t2m = ds.variables['t2m'][:]-273lons_era5, lats_era5 = np.meshgrid(lon,lat)nds = Dataset(newERA5+'e5.oper.an.sfc.128_167_2t.ll025sc.2018110100_2018113023.nc') #  dict_keys(['VAR_2T', 'latitude', 'longitude', 'time', 'utc_date'])lons_nera5 = nds.variables['longitude'][:]-180lats_nera5 = nds.variables['latitude'][:]n_t2m      = nds.variables['VAR_2T'][:]-273lons_nera5, lats_nera5 = np.meshgrid(lons_nera5,lats_nera5)tindex=254 #30 x24 horas == 720 (10.11 a 15utc == 10*24+15)#=====================2 M TEMP=========================# params={'outpath':outpath,#         'modname':modname,#         'modfld':'2m_Temperature',#         'cfield':'T2',#         'clevels':np.arange(-3,48,3),#         'ccmap':cmap_temp,#         'llevels':None,#         'llevels2':[1000],# 	'llevels3':np.arange(-10,48,2),#         'time_index':tindex,#         'times':times,#         'zoom':zoom,#         'skip':17}# # PRIMERA DIFERENCIA. ES QUE OLD ERA5 TIENE 48 LEVELS ??? REVISAR POR ! AGREGAR CARPETA DONDE GUARDO BIEN ESTO. Y PENSAR EN EL PAPER DE MIKLI PARA LAS CLASEScolors1 = np.array(cmaps._HomeyerRainbow_data[0:80])colors2 = np.array(cmaps._HomeyerRainbow_data[100:230])colors3 = np.array(cmaps._viridis_data[0:50])colors  = np.vstack((colors3,colors1,colors2))cmap_temp = mcolors.LinearSegmentedColormap.from_list('my_colormap', colors)fig, ax = plt.subplots(nrows=1, ncols=2, figsize=(16,8)) # old ERA5pcm = ax[0].contourf(lons_era5, lats_era5,  t2m[0,:,:],  cmap=cmap_temp, levels=np.arange(-3,48,3), vmin=-3, vmax=48)plt.colorbar(pcm, ax=ax[0])ax[0].plot(prov[:,0],prov[:,1],color='k');     ax[0].contour(lons_topo, lats_topo, topo_dat, levels=[0.5,1], colors=['gray','gray'], linewidths=2)    ax[0].set_xlim([-70,-62]) ax[0].set_ylim([-35,-25])   ax[0].set_title('(old) ERA5 t2m (lev=0)')# new ERA5pcm = ax[1].contourf(lons_nera5-180, lats_nera5, n_t2m[tindex,:,:],  cmap=cmap_temp, levels=np.arange(-3,48,3), vmin=-3, vmax=48)plt.colorbar(pcm, ax=ax[1])ax[1].plot(prov[:,0],prov[:,1],color='k');     ax[1].contour(lons_topo, lats_topo, topo_dat, levels=[0.5,1], colors=['gray','gray'], linewidths=2)    ax[1].set_xlim([-70,-62]) ax[1].set_ylim([-35,-25])   ax[1].set_title('(new) ERA5 t2m') 